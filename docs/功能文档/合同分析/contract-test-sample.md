# 合同智能体测试样本

## 测试用合同文本

### 示例1: 简单租赁合同

```
房屋租赁合同

甲方（出租方）：张三
乙方（承租方）：李四

经甲乙双方友好协商，就房屋租赁事宜达成如下协议：

第一条 租赁物业
甲方同意将位于北京市朝阳区XX路XX号的房屋出租给乙方使用。

第二条 租赁期限
租赁期限为一年，自2025年1月1日起至2025年12月31日止。

第三条 租金及支付方式
月租金为人民币5000元，乙方应于每月1日前支付当月租金。

第四条 押金
乙方需向甲方支付押金10000元，合同终止时，如无违约情况，甲方应全额退还。

第五条 违约责任
如乙方逾期支付租金超过7天，甲方有权解除合同并不退还押金。

第六条 其他约定
本合同一式两份，甲乙双方各执一份，具有同等法律效力。

甲方签字：__________
乙方签字：__________
签订日期：2024年12月20日
```

### 示例2: 服务合同（含问题条款）

```
软件开发服务合同

甲方（委托方）：ABC科技有限公司
乙方（开发方）：张工作室

第一条 项目内容
甲方委托乙方开发一套企业管理系统。

第二条 开发周期
开发周期为3个月，自合同签订之日起算。

第三条 费用
项目总费用为人民币50000元，分三期支付。

第四条 验收标准
由甲方验收，以甲方满意为准。

第五条 违约责任
如乙方延期交付，每延期一天扣除项目费用1%。
如甲方无故解除合同，已付费用不予退还。

第六条 知识产权
项目开发完成后，所有知识产权归甲方所有。

第七条 其他
甲方有权随时单方面解除本合同。
本合同解释权归甲方所有。

甲方盖章：__________
乙方签字：__________
日期：2024年12月20日
```

## 测试步骤

1. **启动开发服务器**
   ```bash
   npm run dev
   ```

2. **访问合同编辑器**
   ```
   http://localhost:3000/contract/editor
   ```

3. **测试流程**
   - 复制上面的示例合同文本
   - 粘贴到上传区域（先作为纯文本测试）
   - 点击分析按钮
   - 查看分析结果

4. **预期结果**
   - ✅ 能识别合同类型（租赁/服务）
   - ✅ 能提取甲乙双方信息
   - ✅ 能识别主要条款
   - ✅ 能检测缺失的核心条款
   - ✅ 能标记潜在风险（如示例2中的不公平条款）

## 已知问题和改进方向

### 当前版本（v0.1）
- ✅ 基础的合同解析（AI驱动）
- ✅ 简单的条款分类
- ✅ 6大核心条款检查
- ⚠️ 风险识别较简单（仅基于条款类型）
- ⚠️ 缺少规则引擎
- ⚠️ 缺少PDF/Word文件上传

### 下一版本改进计划（v0.2）
- [ ] 实现ContractRuleEngine（规则引擎）
- [ ] 实现RiskIdentificationService（深度风险分析）
- [ ] 集成PDF文本提取（pdfjs-dist）
- [ ] 集成Word文本提取（mammoth）
- [ ] 添加更多风险识别规则

### 未来版本（v0.3+）
- [ ] 交易目的询问功能
- [ ] 协商策略生成
- [ ] 法官视角模拟
- [ ] 律师经验库

## API测试

### 直接测试API

```bash
curl -X POST http://localhost:3000/api/contract/analyze \
  -H "Content-Type: application/json" \
  -d '{
    "contractText": "房屋租赁合同\n\n甲方（出租方）：张三\n乙方（承租方）：李四\n\n第一条 租金\n月租金为5000元..."
  }'
```

### 预期API响应

```json
{
  "success": true,
  "data": {
    "contract": {
      "metadata": {
        "contractType": "租赁",
        "parties": {
          "partyA": { "name": "张三", "role": "甲方" },
          "partyB": { "name": "李四", "role": "乙方" }
        }
      },
      "clauses": [...],
      "extractionConfidence": 0.85
    },
    "analysis": {
      "contractType": "租赁",
      "clauseCount": 6,
      "stats": {...}
    }
  }
}
```

## 成本估算

- 单次分析（1000字合同）：
  - Token消耗：约2000-3000 tokens
  - 成本：约 ¥0.002-0.003（DeepSeek）
  - 耗时：3-5秒

## 故障排查

### 如果AI分析失败
1. 检查 `.env.local` 是否配置了 `DEEPSEEK_API_KEY`
2. 查看浏览器控制台错误信息
3. 查看服务端日志（终端输出）

### 如果返回"兜底结果"
- 说明AI解析失败，但系统仍会返回基础结构
- 检查合同文本格式是否规范
- 尝试更短或更清晰的合同文本

## 下一步开发

参考 `/docs/contract-analysis-architecture.md` 中的完整架构规划。

当前已完成：
- ✅ 第一步：目录结构
- ✅ 第二步：ContractParsingService
- ✅ 第三步：API路由
- ✅ 第四步：前端集成

下一步开发优先级：
1. **规则引擎** - 手工编写6大条款检查规则
2. **风险识别服务** - 基于规则的风险检测
3. **PDF/Word支持** - 文件上传和文本提取
