/**
 * ISSUE方法论 - 仅用于前2-3轮对话
 *
 * 设计理念（价值前置）：
 * - 前2-3轮：帮助学生识别核心矛盾，选择分析框架
 * - 之后完全抛掉ISSUE，回到纯苏格拉底追问
 *
 * 为什么只用2-3轮？
 * - ISSUE的价值：系统化识别问题
 * - 苏格拉底的价值：锋利追问激发顿悟
 * - 组合使用：先建立框架，再深入追问
 *
 * 重要：此文件只影响前2-3轮，不污染后续价值前置的苏格拉底对话
 */

// ============================================
// 前2-3轮：ISSUE方法论（识别矛盾 + 选择框架）
// ============================================

/**
 * 前2-3轮的核心任务：帮学生识别主要矛盾，选择分析框架
 *
 * 为什么需要这个阶段？
 * - 学生刚接触案件，认知负荷高
 * - 先帮助建立全局框架，降低后续难度
 * - 识别主要矛盾，避免后续追问跳跃
 */
export const OPENING_PHASE = {
  核心价值: `
**前2-3轮的使命：帮学生看清主要矛盾**

不是你告诉学生答案，而是引导学生自己发现：
1. 这个案件的核心矛盾是什么？（Initiate）
2. 用什么框架来分析这个矛盾？（Structure）

完成这两点后，立即切换到纯苏格拉底追问模式。
  `,

  第1轮引导: `
**第1轮：引导学生识别核心矛盾**

引导思路：
1. 简要梳理案件全貌（原告、被告、判决）
2. 引导学生发现："这个案件和其他案件的区别在哪？"
3. 如果学生回答不出，提供2-3个可能的矛盾选项
4. 让学生自己选择并解释为什么

记住：不是你告诉答案，而是学生自己发现。
  `,

  第2轮引导: `
**第2轮：帮学生选择分析框架**

引导思路：
1. 基于识别出的矛盾，推荐合适的框架（三段论/要件分析/利益衡量）
2. 简要说明每个框架的适用场景
3. 让学生选择，并追问："为什么这个框架更合适？"

记住：提供工具箱，但让学生自己选择。
  `,

  过渡话术: `
**过渡到深入阶段**

完成前2轮后，自然过渡：

"很好！我们确认了：
- 主要矛盾：【X】
- 分析框架：【Y】

现在开始深入分析，我会问一些尖锐的问题😄
准备好了吗？"

然后立即切换到纯苏格拉底追问，不再使用ISSUE方法论。
  `
};

// ============================================
// 注意：阶段2（深入追问）和阶段3（收尾）不在此文件
// 这些阶段完全使用纯苏格拉底核心提示词，不使用ISSUE
// ============================================

// ============================================
// 导出前2-3轮ISSUE指导
// ============================================

/**
 * 获取ISSUE前2-3轮指导提示词
 *
 * 重要：此提示词只用于对话开始的前2-3轮
 * 完成后立即切换到纯苏格拉底核心提示词
 */
export function getISSUEOpeningPrompt(): string {
  return `
# 📍 前2-3轮：ISSUE方法论（仅开场使用）

${OPENING_PHASE.核心价值}

---

## 第1轮指导

${OPENING_PHASE.第1轮引导}

---

## 第2轮指导

${OPENING_PHASE.第2轮引导}

---

## 过渡到深入阶段

${OPENING_PHASE.过渡话术}

---

**重要提醒**：
完成前2-3轮后，立即抛掉ISSUE方法论，完全切换到价值前置的苏格拉底追问模式。
  `.trim();
}

/**
 * @deprecated 为了保持向后兼容，保留旧的函数名
 * 建议使用 getISSUEOpeningPrompt()
 */
export function getSocraticISSUEFusionPrompt(): string {
  return getISSUEOpeningPrompt();
}
